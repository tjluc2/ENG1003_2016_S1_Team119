<!doctype html>
<html>
    <head>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyByF5gf8EgH8LG35fy8TJACsfOW9Zd88ZY"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <title>Weather</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
        <link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.1.3/material.indigo-pink.min.css">
        <script src="https://storage.googleapis.com/code.getmdl.io/1.1.3/material.min.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
        <link rel="stylesheet" href="css/weatherapp.css" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="mobile-web-app-capable" content="yes" />
        <link rel="shortcut icon" sizes="196x196" href="images/icon.png" />
        <link rel="apple-touch-icon-precomposed" href="images/icon.png" />
    </head>
    
    <body>
        <body onload="createLocationButtons()">
        <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
          <header class="mdl-layout__header">
            <div class="mdl-layout__header-row">
              <span class="mdl-layout-title" id="headerBarTitle">Locations</span>
              <div class="mdl-layout-spacer"></div>
              <button onclick="location.href = 'addlocation.html';" class="mdl-button mdl-js-button mdl-button--icon">
                <i class="material-icons">add</i>
              </button>
            </div>
          </header>
        
            
          <main class="mdl-layout__content">
            <!--   Main page content here:   -->  

            <!--   Sample locations list.   
                This is included to demonstrate navigation.  You will likely want
                to use JavaScript to generate a list of similar structure.
            -->  
            <ul class="mdl-list" id="locationList">
              
            </ul>
            <!--   End sample locations list.   -->  
<input type="text" id="temp" style="border: 0; color: #3F47B0; font-weight: bold;" size="100"/>
     
                             
          </main>
        </div>
        <!--   JavaScript files:   -->
        <script src="js/locationWeatherCache.js"></script>
        <script src="js/mainPage.js"></script>
        <script src="js/jquery.js"></script>
        <script src="js/jquery-ui.js"></script>
        <script src="js/viewLocationPage.js"></script>
        
        <script>
function createLocationButtons(locations) {
       
         temp =   JSON.parse(localStorage.getItem(APP_PREFIX, locations))   
   i = 0
   //Sets the desciprtion to 'loading'
   var currentLocation = "Finding your location..."
   //this function finds the current position and returns a variable 'currentLocation' which is a string. Is is then put into the first list element, which is below. There is a error in chrome where it wont let you use location services from local files (file://index.html). I dont think its an issue, ive tested using a http python server and it works.
   geoFindMe(currentLocation);
    //This creates a new list element and sets the HTML for it. This list element displays the current location
       var listHTML = document.createElement("li")
        listHTML.innerHTML += '   <li id= currentLocation class="mdl-list__item mdl-list__item--two-line" onclick="viewLocation(temp, i);"><span class="mdl-list__item-primary-content"><img class="mdl-list__item-icon" id="icon0" src="images/loading.png"> <span>' + currentLocation + '</span> <span id="weather0" class="mdl-list__item-sub-title">This is your current location!</span> </span></li>';
    document.getElementById('locationList').appendChild(listHTML);
   
//if temp storage is empty it wont create any new list elements.
if(temp == null){
    
}
else{
//runs i agaisnt the length of the temp storage
while(i + 1<=temp.length ){
    temp =   JSON.parse(localStorage.getItem(APP_PREFIX, locations))   
    var listHTML = document.createElement("li")
   summary = "loading...";
   
     
  //creates list element with with index 'i' and summary, which is set to 'loading...'.
         listHTML.innerHTML += '   <li id =' + i + ' ' + 'class="mdl-list__item mdl-list__item--two-line" onclick="viewLocation(this.id, temp);"><span class="mdl-list__item-primary-content"><img class="mdl-list__item-icon" id="icon0" src="images/loading.png"> <span>' + temp[i].nickname + '</span> <span id="weather0" class="mdl-list__item-sub-title">' + summary + '</span> </span></li>';
    document.getElementById('locationList').appendChild(listHTML);
                  
   
        
  //console.log(document.getElementById("0").innerHTML)
    //this function gets the current weather for each location in temp, and then appends each list element with the new 'summary' which no longer contains 'loading...' but the weather summary.
         weatherForecastSummary(temp, i)
     
            i++                    


}
    


}
            
}
</script>
    </body>
</html>




























